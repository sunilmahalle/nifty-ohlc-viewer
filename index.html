<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NIFTY Live Chart</title>
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #111;
      color: white;
      font-family: monospace;
      overflow: hidden;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: #111;
    }

    #priceLabel {
      font-size: 18px;
      font-weight: bold;
    }

    #timeframeButtons button {
      background: #222;
      color: white;
      border: 1px solid #555;
      margin-left: 5px;
      padding: 5px 10px;
      cursor: pointer;
      font-family: monospace;
    }

    #timeframeButtons button:hover {
      background-color: #333;
    }

    #timeframeButtons button.active {
      background-color: #555;
    }

    #chartGrid {
      display: grid;
      grid-template-rows: 60% 40%;
      grid-template-columns: 1fr 1fr;
      height: calc(100vh - 60px); /* full height minus header */
      gap: 5px;
      background: #111;
    }

    .chart-box {
      background: #222;
      padding: 5px;
      position: relative;
    }

    .chart-container {
      position: relative;
    }

    .chart-surface {
      width: 100%;
      height: 100%;
    }

    .chart-label {
      position: absolute;
      top: 6px;
      left: 10px;
      background: rgba(0, 0, 0, 0.6);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 16px;
      font-family: monospace;
      color: #ffffff;
      z-index: 10;
      pointer-events: auto;
    }

    .chart-buttons {
      position: absolute;
      top: 6px;
      right: 10px;
      z-index: 10;
      display: flex;
      gap: 6px;
      pointer-events: auto;
    }

    .chart-buttons button {
      font-family: monospace;
      font-size: 14px;
      padding: 3px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .chart-buttons .buy {
      background-color: #4caf50;
      color: white;
    }

    .chart-buttons .sell {
      background-color: #f44336;
      color: white;
    }

    #niftyChart {
      grid-column: span 2;
    }

    .green { color: #4caf50; }
    .red   { color: #f44336; }
    .gray  { color: #ccc; }
    #profileLogo {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      margin-left: 10px;
      border: 1px solid #444;
      object-fit: cover;
      background-color: #000; /* fallback */
      box-shadow: 0 0 6px rgba(255, 255, 255, 0.2);
    }

    #profileLogo:hover {
      transform: scale(1.1);
    }

  </style>
</head>
<body>

  <div class="header">
    <div style="display: flex; align-items: center; gap: 10px;">
      <div id="priceLabel" class="gray">Waiting for data...</div>

      <!-- ðŸ“ž CALL and ðŸ“‰ PUT buttons -->
      <button id="openCallPopup">ðŸ“ž CALL</button>
      <button id="openPutPopup">ðŸ“‰ PUT</button>
    </div>

    <!-- Timeframe buttons remain on the right -->
    <div id="timeframeButtons">
      <button data-tf="1m" class="active">1m</button>
      <button data-tf="3m">3m</button>
      <button data-tf="5m">5m</button>
      <button data-tf="15m">15m</button>
      <img id="profileLogo" src="static/profile.png" alt="Logo" />

    </div>
  </div>



  
  <!-- âœ… Grid for all charts -->
  <div id="chartGrid">
    <!-- NIFTY Main Chart -->
    <div id="niftyChart" class="chart-box"></div>

    <!-- CALL Chart -->
    <!-- CALL chart box -->
    <div class="chart-box chart-container">
      <div id="callChart" class="chart-surface"></div>

      <!-- ðŸ”· Top unified bar -->
      <div class="chart-bar">
        <!-- ðŸ”¹ Label -->
        <div id="callLabel" class="chart-label">CALL: Waiting...</div>

        <!-- ðŸ”¹ Timeframe buttons -->
        <div class="chart-tf">
          <button data-tf="1" data-target="call">1m</button>
          <button data-tf="3" data-target="call">3m</button>
          <button data-tf="5" data-target="call">5m</button>
        </div>

        <!-- ðŸ”¹ Buy/Sell buttons -->
        <div class="chart-actions">
          

          

        </div>
      </div>
    </div>


    <!-- PUT Chart -->
    <!-- CALL chart box -->
    <div class="chart-box chart-container">
      <div id="putChart" class="chart-surface"></div>

      <!-- ðŸ”· Top unified bar -->
      <div class="chart-bar">
        <!-- ðŸ”¹ Label -->
        <div id="putLabel" class="chart-label">PUT: Waiting...</div>


        <!-- ðŸ”¹ Timeframe buttons -->
        <div class="chart-tf">
          <button data-tf="1" data-target="put">1m</button>
          <button data-tf="3" data-target="put">3m</button>
          <button data-tf="5" data-target="put">5m</button>
        </div>

        <!-- ðŸ”¹ Buy/Sell buttons -->
        <div class="chart-actions">
          

          

        </div>
      </div>
    </div>
  </div> <!-- âœ… FIXED: Properly close #chartGrid -->


  <!-- âœ… Chart library -->
  <script src="https://unpkg.com/lightweight-charts@4.0.0/dist/lightweight-charts.standalone.production.js"></script>

  <!-- âœ… App logic -->
  <script src="/static/app.js"></script>




</body>
</html>
